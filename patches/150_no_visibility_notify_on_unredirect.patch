diff -u xorg-server-1.5.2/dix/window.c xorg-server-1.5.2/dix/window.c
--- xorg-server-1.5.2/dix/window.c
+++ xorg-server-1.5.2/dix/window.c
@@ -3259,6 +3258,8 @@
 SendVisibilityNotify(WindowPtr pWin)
 {
     xEvent event;
+ if (!MapUnmapEventsEnabled(pWin))
+ return;
 #ifndef NO_XINERAMA_PORT
     unsigned int visibility = pWin->visibility;
 #endif
