From: Michel DÃ¤nzer <michel@tungstengraphics.com>
Date: Sat, 24 Jun 2006 13:09:24 +0000 (+0200)
Subject: Make sure <execinfo.h> is actually included when needed.
X-Git-Tag: xorg-server-1.1.99.3
X-Git-Url: http://gitweb.freedesktop.org/?p=xorg/xserver.git;a=commitdiff;h=36756fdb2ddc154b406f664a6af0f38d26e6973d

Make sure <execinfo.h> is actually included when needed.

configure only defines HAVE_BACKTRACE, not HAVE_EXECINFO_H.

This could cause problems on platforms where the size of a pointer is greater
than that of an integer, see
http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=363218 .
---

Index: xorg-server/hw/xfree86/common/xf86Events.c
===================================================================
--- xorg-server.orig/hw/xfree86/common/xf86Events.c	2006-09-21 23:04:21.000000000 -0400
+++ xorg-server/hw/xfree86/common/xf86Events.c	2006-09-21 23:04:50.000000000 -0400
@@ -1275,12 +1275,8 @@
     xf86SigIllHandler = sigillhandler;
 }
 
-#ifdef HAVE_EXECINFO_H
-#define HAVE_BACKTRACE
-#include <execinfo.h>
-#endif
-
 #ifdef HAVE_BACKTRACE
+#include <execinfo.h>
 
 static __inline__ void xorg_backtrace(void)
 {
