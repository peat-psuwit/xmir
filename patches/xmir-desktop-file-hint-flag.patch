From cc91948d4be69af96ddf9417a4b3cfac5d0f0f35 Mon Sep 17 00:00:00 2001
From: Robert Ancell <robert.ancell@canonical.com>
Date: Mon, 13 Jul 2015 15:54:32 +1200
Subject: [PATCH 3/4] xmir: Ignore --desktop_file_hint flag required by Unity8
 to decide which application is starting

---
 hw/xmir/xmir.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/hw/xmir/xmir.c b/hw/xmir/xmir.c
index 2a7227e..810b715 100644
--- a/hw/xmir/xmir.c
+++ b/hw/xmir/xmir.c
@@ -123,6 +123,9 @@ ddxProcessArgument(int argc, char *argv[], int i)
     } else if (!strcmp(argv[i], "-novtswitch") ||
                !strncmp(argv[i], "vt", 2)) {
         return 1;
+    /* Bypass unity8 "security" */
+    } else if (!strncmp(argv[i], "--desktop_file_hint=", strlen("--desktop_file_hint="))) {
+        return 1;
     } else if (!strcmp(argv[i], "-fd")) {
         if (!seen_shared)
             NoListenAll = 1;
-- 
2.4.6

